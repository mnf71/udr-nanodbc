SET TERM ^ ;

CREATE OR ALTER PACKAGE NANO$UDR
AS
BEGIN

  FUNCTION initialize RETURNS TY$NANO_BLANK;
  FUNCTION finalize RETURNS TY$NANO_BLANK;
  FUNCTION expunge RETURNS TY$NANO_BLANK;

  FUNCTION locale(set_locale VARCHAR(20) CHARACTER SET NONE DEFAULT NULL /* NULL - get current locale */)
    RETURNS VARCHAR(20) CHARACTER SET NONE;

  /* -- none */ FUNCTION error_message RETURNS VARCHAR(512) CHARACTER SET NONE;
  -- utf8 FUNCTION error_message RETURNS VARCHAR(512) CHARACTER SET UTF8;

END^

RECREATE PACKAGE BODY NANO$UDR
AS
BEGIN

  FUNCTION initialize RETURNS TY$NANO_BLANK
    EXTERNAL NAME 'nano!udr$initialize'
    ENGINE UDR;

  FUNCTION finalize RETURNS TY$NANO_BLANK
    EXTERNAL NAME 'nano!udr$finalize'
    ENGINE UDR;

  FUNCTION expunge RETURNS TY$NANO_BLANK
    EXTERNAL NAME 'nano!udr$expunge'
    ENGINE UDR;

  FUNCTION locale(set_locale VARCHAR(20) CHARACTER SET NONE) RETURNS VARCHAR(20) CHARACTER SET NONE
    EXTERNAL NAME 'nano!udr$locale'
    ENGINE UDR;

  /* -- none */ FUNCTION error_message RETURNS VARCHAR(512) CHARACTER SET NONE
  -- utf8 FUNCTION error_message RETURNS VARCHAR(512) CHARACTER SET UTF8
    EXTERNAL NAME 'nano!udr$error_message'
    ENGINE UDR;

END^

SET TERM ; ^

/* Existing privileges on this package */

GRANT EXECUTE ON PACKAGE NANO$UDR TO SYSDBA;
